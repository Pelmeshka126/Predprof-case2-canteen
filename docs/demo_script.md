# Demo Script (Кейс №2)

## Подготовка

1. Запустить приложение: `python3 app.py`.
2. Открыть `http://127.0.0.1:5000/login`.
3. Использовать 3 вкладки браузера (student/cook/admin) или последовательно выходить/входить.

## Сценарий показа (8-12 минут)

1. Регистрация нового пользователя:
- Открыть `/register`.
- Показать, что форма не содержит выбора роли.
- Зарегистрировать `student`.

2. Вход под учеником:
- Показать меню и стоимость.
- Выполнить оплату.
- Отметить получение питания.
- Попробовать отметить то же блюдо повторно -> показать ошибку.
- Оставить отзыв.
- Сохранить аллергии/предпочтения.

3. Вход под поваром:
- Показать склад и низкие остатки (если есть).
- Выполнить выдачу блюда.
- Создать заявку на закупку с дробными значениями (`qty=12.345`, `unit_price=71.50`).
- Показать таблицу заявок без scientific notation.

4. Вход под администратором:
- Открыть dashboard, показать сводные метрики:
  - оплаты,
  - получения,
  - выдача,
  - затраты,
  - баланс.
- Одобрить заявку на закупку.
- Нажать `Скачать отчет CSV`.

5. Управление пользователями:
- Перейти на `/admin/users`.
- Сменить роль тестового пользователя.
- Заблокировать пользователя.
- Показать, что заблокированный пользователь не может войти.

6. Безопасность:
- Кратко показать, что чужая роль на чужом роуте дает `403`.
- Указать наличие CSRF-защиты всех POST-форм.

## Что проговорить на защите

- Почему выбран Flask+SQLite.
- Какие требования кейса закрыты и где.
- Как реализованы исключения и защита от некорректных данных.
- Как проверялось качество: 15 интеграционных тестов + ручной протокол.
